{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '43229178-92086ef52b57e39ce4e68da2d';\nconst DEFAULT_PER_PAGE = 15;\n\nexport async function fetchImages(query, page = 1) {\n  const url = `https://pixabay.com/api/?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${DEFAULT_PER_PAGE}`;\n\n  try {\n    const response = await axios.get(url);\n    if (response.status !== 200) {\n      throw new Error('Network response was not ok');\n    }\n    return response.data.hits;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}","export function createImageCard(image) {\n  return `\n    <div class=\"card\">\n      <a href=\"${image.largeImageURL}\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n      </a>\n      <div class=\"stats\">\n        <span>Likes: ${image.likes}</span>\n        <span>Views: ${image.views}</span>\n        <span>Comments: ${image.comments}</span>\n        <span>Downloads: ${image.downloads}</span>\n      </div>\n    </div>\n  `;\n}\n\nexport function showMessage(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message\n  });\n}\n\nexport function hideMessage() {\n}","import axios from 'axios';\nimport { fetchImages } from './js/pixabay-api.js';\nimport { showMessage } from './js/render-functions.js';\nimport { createImageCard } from './js/render-functions.js';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst searchForm = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst lightbox = new SimpleLightbox('.gallery a', {});\nlet currentPage = 1;\nlet currentQuery = '';\n\nfunction showLoader() {\n  loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\n\nfunction showLoadMoreBtn() {\n  loadMoreBtn.style.display = 'block';\n}\n\nfunction hideLoadMoreBtn() {\n  loadMoreBtn.style.display = 'none';\n}\n\nsearchForm.addEventListener('submit', onSubmit);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onSubmit(event) {\n  event.preventDefault();\n  \n  const query = event.target.search.value.trim();\n  \n  if (!query) {\n    showMessage('Please enter a search query');\n    return;\n  }\n\n  currentPage = 1;\n  currentQuery = query;\n  \n  try {\n    showLoader();\n    gallery.innerHTML = '';\n    \n    const images = await fetchImages(query);\n    if (images.length === 0) {\n      showMessage('Sorry, there are no images matching your search query. Please try again!');\n    } else {\n      renderGallery(images);\n      showLoadMoreBtn();\n    }\n  } catch (error) {\n    showMessage('An error occurred while fetching images. Please try again later.');\n  } finally {\n    hideLoader();\n  }\n}\n\nasync function onLoadMore() {\n  currentPage++;\n  \n  try {\n    showLoader();\n    const images = await fetchImages(currentQuery, currentPage);\n    if (images.length === 0) {\n      hideLoadMoreBtn();\n      showMessage(\"We're sorry, but you've reached the end of search results.\");\n    } else {\n      renderGallery(images);\n      smoothScrollByGalleryHeight();\n    }\n  } catch (error) {\n    showMessage('An error occurred while fetching more images. Please try again later.');\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction renderGallery(images) {\n  const cardsMarkup = images.map(createImageCard).join('');\n  gallery.insertAdjacentHTML('beforeend', cardsMarkup);\n  \n  lightbox.refresh();\n}\n\nfunction smoothScrollByGalleryHeight() {\n  const galleryHeight = gallery.getBoundingClientRect().height * 2;\n  window.scrollBy({\n    top: galleryHeight,\n    behavior: 'smooth'\n  });\n}"],"names":["API_KEY","DEFAULT_PER_PAGE","fetchImages","query","page","url","response","axios","error","createImageCard","image","showMessage","message","searchForm","gallery","loader","loadMoreBtn","lightbox","SimpleLightbox","currentPage","currentQuery","showLoader","hideLoader","showLoadMoreBtn","hideLoadMoreBtn","onSubmit","onLoadMore","event","images","renderGallery","smoothScrollByGalleryHeight","cardsMarkup","galleryHeight"],"mappings":"6vBAEA,MAAMA,EAAU,qCACVC,EAAmB,GAElB,eAAeC,EAAYC,EAAOC,EAAO,EAAG,CACjD,MAAMC,EAAM,gCAAgCL,CAAO,MAAMG,CAAK,iEAAiEC,CAAI,aAAaH,CAAgB,GAEhK,GAAI,CACF,MAAMK,EAAW,MAAMC,EAAM,IAAIF,CAAG,EACpC,GAAIC,EAAS,SAAW,IACtB,MAAM,IAAI,MAAM,6BAA6B,EAE/C,OAAOA,EAAS,KAAK,IACtB,OAAQE,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACP,CACH,CClBO,SAASC,EAAgBC,EAAO,CACrC,MAAO;AAAA;AAAA,iBAEQA,EAAM,aAAa;AAAA,oBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,uBAGnCA,EAAM,KAAK;AAAA,uBACXA,EAAM,KAAK;AAAA,0BACRA,EAAM,QAAQ;AAAA,2BACbA,EAAM,SAAS;AAAA;AAAA;AAAA,GAI1C,CAEO,SAASC,EAAYC,EAAS,CACnC,SAAS,MAAM,CACb,MAAO,QACP,QAASA,CACb,CAAG,CACH,CCdA,MAAMC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAW,IAAIC,EAAe,aAAc,CAAE,CAAA,EACpD,IAAIC,EAAc,EACdC,EAAe,GAEnB,SAASC,GAAa,CACpBN,EAAO,MAAM,QAAU,OACzB,CAEA,SAASO,GAAa,CACpBP,EAAO,MAAM,QAAU,MACzB,CAEA,SAASQ,GAAkB,CACzBP,EAAY,MAAM,QAAU,OAC9B,CAEA,SAASQ,GAAkB,CACzBR,EAAY,MAAM,QAAU,MAC9B,CAEAH,EAAW,iBAAiB,SAAUY,CAAQ,EAC9CT,EAAY,iBAAiB,QAASU,CAAU,EAEhD,eAAeD,EAASE,EAAO,CAC7BA,EAAM,eAAc,EAEpB,MAAMxB,EAAQwB,EAAM,OAAO,OAAO,MAAM,OAExC,GAAI,CAACxB,EAAO,CACVQ,EAAY,6BAA6B,EACzC,MACD,CAEDQ,EAAc,EACdC,EAAejB,EAEf,GAAI,CACFkB,IACAP,EAAQ,UAAY,GAEpB,MAAMc,EAAS,MAAM1B,EAAYC,CAAK,EAClCyB,EAAO,SAAW,EACpBjB,EAAY,0EAA0E,GAEtFkB,EAAcD,CAAM,EACpBL,IAEH,MAAe,CACdZ,EAAY,kEAAkE,CAClF,QAAY,CACRW,GACD,CACH,CAEA,eAAeI,GAAa,CAC1BP,IAEA,GAAI,CACFE,IACA,MAAMO,EAAS,MAAM1B,EAAYkB,EAAcD,CAAW,EACtDS,EAAO,SAAW,GACpBJ,IACAb,EAAY,4DAA4D,IAExEkB,EAAcD,CAAM,EACpBE,IAEH,MAAe,CACdnB,EAAY,uEAAuE,CACvF,QAAY,CACRW,GACD,CACH,CAEA,SAASO,EAAcD,EAAQ,CAC7B,MAAMG,EAAcH,EAAO,IAAInB,CAAe,EAAE,KAAK,EAAE,EACvDK,EAAQ,mBAAmB,YAAaiB,CAAW,EAEnDd,EAAS,QAAO,CAClB,CAEA,SAASa,GAA8B,CACrC,MAAME,EAAgBlB,EAAQ,sBAAqB,EAAG,OAAS,EAC/D,OAAO,SAAS,CACd,IAAKkB,EACL,SAAU,QACd,CAAG,CACH"}